{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const getImagesByQuery = async (query, page) => {\n  const response = await axios.get(`https://pixabay.com/api/`, {\n    params: {\n      key: '51362773-b845efdff4000eb7d694ec90c',\n      q: query,\n      page: page,\n      per_page: 15,\n      orientation: 'horizontal',\n      safesearch: true,\n      image_type: 'photo',\n    },\n  });\n  return response.data;\n};\n","import SimpleLightbox from 'simplelightbox';\n\nconst refs = {\n  galleryList: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  loadBtn: document.querySelector('.load-btn'),\n};\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport const createGallery = images => {\n  const galleryCardTemplate = images\n    .map(\n      img =>\n        `<li class=\"gallery-card\">\n  <a href=\"${img.largeImageURL}\">\n    <img\n      class=\"js-gallery-img\"\n      src=\"${img.webformatURL}\"\n      alt=\"${img.tags}\"\n      width=\"360\"\n  /></a>\n  <ul class=\"info-list\">\n    <li class=\"info-item\">\n      <h3 class=\"info-item-title\">Likes</h3>\n      <p class=\"info-item-text\">${img.likes}</p>\n    </li>\n    <li class=\"info-item\">\n      <h3 class=\"info-item-title\">Views</h3>\n      <p class=\"info-item-text\">${img.views}</p>\n    </li>\n    <li class=\"info-item\">\n      <h3 class=\"info-item-title\">Comments</h3>\n      <p class=\"info-item-text\">${img.comments}</p>\n    </li>\n    <li class=\"info-item\">\n      <h3 class=\"info-item-title\">Downloads</h3>\n      <p class=\"info-item-text\">${img.downloads}</p>\n    </li>\n  </ul>\n</li>`\n    )\n    .join('');\n  refs.galleryList.insertAdjacentHTML('beforeend', galleryCardTemplate);\n  lightbox.refresh();\n};\n\nexport const clearGallery = () => {\n  refs.galleryList.innerHTML = '';\n};\n\nexport const showLoader = () => {\n  refs.loader.classList.remove('is-hidden');\n};\n\nexport const hideLoader = () => {\n  refs.loader.classList.add('is-hidden');\n};\n\nexport const showLoadMoreButton = () => {\n  refs.loadBtn.classList.remove('is-hidden');\n};\n\nexport const hideLoadMoreButton = () => {\n  refs.loadBtn.classList.add('is-hidden');\n};\n","import iziToast from 'izitoast';\nimport { getImagesByQuery } from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions';\n\nconst refs = {\n  searchForm: document.querySelector('.js-search-form'),\n  galleryList: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  loadBtn: document.querySelector('.load-btn'),\n};\n\nlet currentPage = 1;\nlet searchValue = '';\nlet totalHits = 0;\nconst PER_PAGE = 15;\n\nconst onSearchFormSubmit = async e => {\n  try {\n    e.preventDefault();\n    clearGallery();\n    hideLoadMoreButton();\n    // ==========\n    currentPage = 1;\n    // ==========\n\n    searchValue = e.target.elements['search-text'].value.trim();\n    if (searchValue === '') {\n      iziToast.error({\n        message: 'The input field must be filled in!',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    showLoader();\n\n    const { hits, totalHits: total } = await getImagesByQuery(\n      searchValue,\n      currentPage\n    );\n    totalHits = total;\n    if (hits.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      return;\n    }\n    createGallery(hits);\n    if (currentPage * PER_PAGE < totalHits) {\n      showLoadMoreButton();\n    } else {\n      hideLoadMoreButton();\n    }\n  } catch (error) {\n    iziToast.error({\n      message: `Error: ${error}`,\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n};\n\nconst onLoadBtnClick = async e => {\n  try {\n    showLoader();\n    e.target.blur();\n    currentPage += 1;\n    const { hits } = await getImagesByQuery(searchValue, currentPage);\n    createGallery(hits);\n    showLoadMoreButton();\n    if (currentPage * PER_PAGE >= totalHits) {\n      hideLoadMoreButton();\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n\n    const heightCard =\n      refs.galleryList.lastElementChild.getBoundingClientRect().height;\n\n    scrollBy({\n      top: heightCard * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    iziToast.error({\n      message: `Error: ${error}`,\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n};\n\nrefs.searchForm.addEventListener('submit', onSearchFormSubmit);\nrefs.loadBtn.addEventListener('click', onLoadBtnClick);\n"],"names":["getImagesByQuery","query","page","axios","refs","lightbox","SimpleLightbox","createGallery","images","galleryCardTemplate","img","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","currentPage","searchValue","totalHits","PER_PAGE","onSearchFormSubmit","e","iziToast","hits","total","error","onLoadBtnClick","heightCard"],"mappings":"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"}